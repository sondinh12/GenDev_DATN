@extends('client.layout.master')

@section('content')
<div id="content" class="site-content" tabindex="-1">
    <div class="col-full">
        <div class="row">
            <div id="primary" class="content-area">
                <main id="main" class="site-main">
                    <div class="slider-with-banners row">
                        <div class="slider-block column-1-slider-block ">
                            <div class="home-v2-slider home-slider">
                                <div class="slider-1"
                                    style="background-image: url(assets/images/slider/home-v2-background.jpg);">
                                    <img src="assets/images/slider/home-v2-img-1.png" alt="">
                                    <div class="caption">
                                        <div class="title">The new-tech gift you are wishing for
                                            <br>is right here
                                        </div>
                                        <div class="sub-title">Big screens in incredibly slim designs that in your hand.
                                        </div>
                                        <div class="button">Browse now
                                            <i class="tm tm-long-arrow-right"></i>
                                        </div>
                                        <div class="bottom-caption">Free shipping on US Terority</div>
                                    </div>
                                </div>
                                <div class="slider-1"
                                    style="background-image: url(assets/images/slider/home-v2-background.jpg);">
                                    <img src="assets/images/slider/home-v2-img-1.png" alt="">
                                    <div class="caption">
                                        <div class="title">The new-tech gift you are wishing for
                                            <br>is right here
                                        </div>
                                        <div class="sub-title">Big screens in incredibly slim designs that in your hand.
                                        </div>
                                        <div class="button">Browse now
                                            <i class="tm tm-long-arrow-right"></i>
                                        </div>
                                        <div class="bottom-caption">Free shipping on US Terority</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="banners-block column-2-banners-block">
                            <div class="banner text-in-left">
                                <a href="shop.html">
                                    <div style="background-size: cover; background-position: center center; background-image: url( assets/images/banner/2-1.jpg); height: 256px;"
                                        class="banner-bg">
                                        <div class="caption">
                                            <div class="banner-info">
                                                <h3 class="title">
                                                    <strong>20% Off Tech</strong>
                                                    <br> at Ultrabooks,
                                                    <br> Laptops, Tablets
                                                    <br>Notebooks &amp;
                                                    <br>More
                                                </h3>
                                            </div>
                                            <!-- .banner-info -->
                                        </div>
                                        <!-- .caption -->
                                    </div>
                                    <!-- .banner-bg -->
                                </a>
                            </div>
                            <!-- .banner -->
                            <div class="banner text-in-left">
                                <a href="shop.html">
                                    <div style="background-size: cover; background-position: center center; background-image: url( assets/images/banner/2-2.jpg); height: 256px;"
                                        class="banner-bg">
                                        <div class="caption">
                                            <div class="banner-info">
                                                <h4 class="pretitle">Best Gift Idea</h4>
                                                <h3 class="title">Mini Two Wheel
                                                    <br>
                                                    <strong>Self Balancing</strong>
                                                    <br> Scooter
                                                </h3>
                                            </div>
                                            <!-- .banner-info -->
                                            <span class="price">
                                                <ins>
                                                    <span class="woocommerce-Price-amount amount">
                                                        <span
                                                            class="woocommerce-Price-currencySymbol">£</span>339.99</span>
                                                </ins>
                                                <del>
                                                    <span class="woocommerce-Price-amount amount">
                                                        <span
                                                            class="woocommerce-Price-currencySymbol">£</span>689</span>
                                                </del>
                                            </span>
                                        </div>
                                        <!-- .caption -->
                                    </div>
                                    <!-- .banner-bg -->
                                </a>
                            </div>
                            <!-- .banner -->
                        </div>
                        <!-- .banners-block -->
                    </div>
                    <section class="section-top-categories section-categories-carousel" id="categories-carousel-3">
                        <header class="section-header">
                            <h2 class="section-title">Top
                                <br>categories
                                <br>this week
                            </h2>
                            <a class="readmore-link" href="#">Full Catalog</a>
                        </header>
                        <!-- .section-header -->
                        <div class="product-categories product-categories-carousel" data-ride="tm-slick-carousel"
                            data-wrap=".products"
                            data-slick="{&quot;infinite&quot;:false,&quot;slidesToShow&quot;:7,&quot;slidesToScroll&quot;:1,&quot;dots&quot;:false,&quot;arrows&quot;:true,&quot;prevArrow&quot;:&quot;&lt;a href=https://transvelo.github.io/"
                            #\&quot;&gt;&lt;i class=\&quot;tm
                            tm-arrow-left\&quot;&gt;&lt;\/i&gt;&lt;\/a&gt;&quot;,&quot;nextArrow&quot;:&quot;&lt;a
                            href=https://transvelo.github.io/"#\&quot;&gt;&lt;i class=\&quot;tm
                            tm-arrow-right\&quot;&gt;&lt;\/i&gt;&lt;\/a&gt;&quot;,&quot;appendArrows&quot;:&quot;#categories-carousel-3
                            .custom-slick-nav&quot;,&quot;responsive&quot;:[{&quot;breakpoint&quot;:1200,&quot;settings&quot;:{&quot;slidesToShow&quot;:2,&quot;slidesToScroll&quot;:2}},{&quot;breakpoint&quot;:1400,&quot;settings&quot;:{&quot;slidesToShow&quot;:5,&quot;slidesToScroll&quot;:5}},{&quot;breakpoint&quot;:1700,&quot;settings&quot;:{&quot;slidesToShow&quot;:6,&quot;slidesToScroll&quot;:6}}]}">
                            <div class="woocommerce columns-7">
                                <div class="products">
                                    <div class="product-category product">
                                        <a href="product-category.html">
                                            <img width="224" height="197" alt="Fashion"
                                                src="assets/images/category/sm-1.png">
                                            <h2 class="woocommerce-loop-category__title"> All in One PC </h2>
                                        </a>
                                    </div>
                                    <div class="product-category product">
                                        <a href="product-category.html">
                                            <img width="224" height="197" alt="Footwear"
                                                src="assets/images/category/sm-2.png">
                                            <h2 class="woocommerce-loop-category__title"> Audio & Music </h2>
                                        </a>
                                    </div>
                                    <div class="product-category product">
                                        <a href="product-category.html">
                                            <img width="224" height="197" alt="Furnitures"
                                                src="assets/images/category/sm-3.png">
                                            <h2 class="woocommerce-loop-category__title"> Cells & Tablets </h2>
                                        </a>
                                    </div>
                                    <div class="product-category product">
                                        <a href="product-category.html">
                                            <img width="224" height="197" alt="Perfumes"
                                                src="assets/images/category/sm-4.png">
                                            <h2 class="woocommerce-loop-category__title"> Computers & Laptops </h2>
                                        </a>
                                    </div>
                                    <div class="product-category product">
                                        <a href="product-category.html">
                                            <img width="224" height="197" alt="Power Tools"
                                                src="assets/images/category/sm-5.png">
                                            <h2 class="woocommerce-loop-category__title"> Desktop PCs </h2>
                                        </a>
                                    </div>
                                    <div class="product-category product">
                                        <a href="product-category.html">
                                            <img width="224" height="197" alt="Smart Appliances"
                                                src="assets/images/category/sm-6.png">
                                            <h2 class="woocommerce-loop-category__title"> Digital Cameras </h2>
                                        </a>
                                    </div>
                                    <div class="product-category product">
                                        <a href="product-category.html">
                                            <img width="224" height="197" alt="Perfumes"
                                                src="assets/images/category/sm-4.png">
                                            <h2 class="woocommerce-loop-category__title"> Computers & Laptops </h2>
                                        </a>
                                    </div>
                                </div>
                                <!-- .products-->
                            </div>
                            <!-- .woocommerce-->
                        </div>
                        <!-- .product-categories -->
                    </section>
                    <!-- .section-top-categories -->
                    <section class="section-6-1-6-products-tabs">
                        <header class="section-header">
                            <h2 class="section-title">Daily Deals!
                                <span>Get our best prices.</span>
                            </h2>
                        </header>
                        <!-- /.section-header -->
                        <div class="6-1-6-products-tabs">
                            <ul role="tablist" class="nav justify-content-center">
                                <li class="nav-item"><a class="nav-link " href="#tab-30" data-toggle="tab">-30%</a></li>
                                <li class="nav-item"><a class="nav-link active" href="#tab-50"
                                        data-toggle="tab">-50%</a></li>
                                <li class="nav-item"><a class="nav-link " href="#tab-70" data-toggle="tab">-70%</a></li>
                            </ul>
                            <!-- /.nav -->
                            <div class="tab-content">
                                <div id="tab-30" class="tab-pane" role="tabpanel">
                                    <div class="row row-6-1-6-products">
                                        <div class="product-1">
                                            <div class="woocommerce columns-1">
                                                <div class="products">
                                                    <div class="sale-product-with-timer product">
                                                        <a class="woocommerce-LoopProduct-link"
                                                            href="single-product-fullwidth.html">
                                                            <div class="sale-product-with-timer-header">
                                                                <div class="price-and-title">
                                                                    <span class="price">
                                                                        <ins>
                                                                            <span
                                                                                class="woocommerce-Price-amount amount">
                                                                                <span
                                                                                    class="woocommerce-Price-currencySymbol">$</span>425.89</span>
                                                                        </ins>
                                                                        <del>
                                                                            <span
                                                                                class="woocommerce-Price-amount amount">
                                                                                <span
                                                                                    class="woocommerce-Price-currencySymbol">$</span>545.89</span>
                                                                        </del>
                                                                    </span>
                                                                    <!-- /.price -->
                                                                    <h2 class="woocommerce-loop-product__title">Tablet
                                                                        Red EliteBook Revolve</h2>
                                                                </div>
                                                                <!-- /.price-and-title -->
                                                                <div class="sale-label-outer">
                                                                    <div class="sale-saved-label">
                                                                        <span class="saved-label-text">Save</span>
                                                                        <span class="saved-label-amount">
                                                                            <span
                                                                                class="woocommerce-Price-amount amount">
                                                                                <span
                                                                                    class="woocommerce-Price-currencySymbol">$</span>120.00</span>
                                                                        </span>
                                                                    </div>
                                                                    <!-- /.sale-saved-label -->
                                                                </div>
                                                                <!-- /.sale-label-outer -->
                                                            </div>
                                                            <!-- /.sale-product-with-timer-header -->
                                                            <img width="224" height="197" alt="" class="wp-post-image"
                                                                src="assets/images/products/6-1-6-center.jpg">
                                                            <div class="deal-progress">
                                                                <div class="deal-stock">
                                                                    <div class="stock-sold">Already Sold:
                                                                        <strong>0</strong>
                                                                    </div>
                                                                    <div class="stock-available">Available:
                                                                        <strong>1000</strong>
                                                                    </div>
                                                                </div>
                                                                <!-- /.deal-stock -->
                                                                <div class="progress">
                                                                    <span style="width:0%" class="progress-bar">0</span>
                                                                </div>
                                                                <!-- /.progress -->
                                                            </div>
                                                            <!-- /.deal-progress -->
                                                            <div class="deal-countdown-timer">
                                                                <div class="marketing-text">
                                                                    <span class="line-1">Hurry up!</span>
                                                                    <span class="line-2">Offers ends in:</span>
                                                                </div>
                                                                <!-- /.marketing-text -->
                                                                <span style="display:none;"
                                                                    class="deal-time-diff">29994</span>
                                                                <div class="deal-countdown countdown"></div>
                                                            </div>
                                                            <!-- /.deal-countdown-timer -->
                                                        </a>
                                                        <!-- /.woocommerce-LoopProduct-link -->
                                                    </div>
                                                    <!-- /.sale-product-with-timer -->
                                                </div>
                                                <!-- /.products -->
                                            </div>
                                            <!-- /.woocommerce -->
                                        </div>

                            </div>
                            <!-- /.tab-content -->
                        </div>
                        <!-- /.6-1-6-products-tabs -->
                    </section>
                    <!-- /.section-6-1-6-products-tabs -->
                    <div class="fullwidth-notice stretch-full-width">
                        
                    </div>
                    <!-- .fullwidth-notice -->

                    <!-- /.banners -->

                    <!-- .section-products-carousel-tabs -->
                    <section class="section-3-2-3-product-cards-tabs-with-featured-product stretch-full-width py-4">
                        <div class="col-full">
                            <header class="section-header text-center mb-4">
                                <h2 class="section-title h3 fw-bold">
                                    <span class="text-gradient">Hurry up!</span>
                                    <span class="d-block text-primary mt-1">Special Offers</span>
                                </h2>
                                <ul role="tablist" class="nav nav-pills justify-content-center mb-3">
                                    @foreach($categories as $category)
                                    <li class="nav-item">
                                        <a class="nav-link {{ $loop->first ? 'active' : '' }} btn btn-sm btn-outline-primary mx-1 rounded-pill px-3" 
                                           href="#category-{{ $category->id }}" 
                                           data-toggle="tab">{{ $category->name }}</a>
                                    </li>
                                    @endforeach
                                </ul>
                            </header>
                            <!-- .section-header -->
                            <div class="tab-content">
                                @foreach($categories as $category)
                                <div id="category-{{ $category->id }}" class="tab-pane {{ $loop->first ? 'active' : '' }}" role="tabpanel">
                                    <div class="product-cards-3-2-3-with-featured-product">
                                        <div class="row row-cols-2 row-cols-md-4 g-3">
                                            @foreach($categoryProducts[$category->id] as $product)
                                            <div class="col-lg-3 col-md-4 col-sm-6
                                                        col-12 mb-3">
                                                <div class="card h-100 product-card border-0 shadow-lg rounded-4 position-relative overflow-hidden animate__animated animate__fadeInUp" style="min-width:0; min-height:unset;">
                                                    <div class="product-image-wrapper bg-white d-flex align-items-center justify-content-center p-2 position-relative" style="height:140px; min-height:unset;">
                                                        <a href="{{ route('client.products.show', $product->id) }}" class="d-block w-100 h-100">
                                                            <img src="{{ asset('storage/' . $product->image) }}" alt="{{ $product->name }}" class="img-fluid product-thumbnail transition" style="max-height:110px; object-fit:contain; margin:0 auto;">
                                                        </a>
                                                        @if($product->sale_price)
                                                        <!-- <span class="badge bg-danger position-absolute" style="top:8px; left:8px; z-index:2;">-{{ round((($product->price - $product->sale_price) / $product->price) * 100) }}%</span> -->
                                                        @endif
                                                    </div>
                                                        <div class="card-body p-2 d-flex flex-column justify-content-between align-items-center text-center">
                                                        <h6 class="card-title text-truncate mb-1 fw-semibold w-100" style="font-size:1rem;">
                                                            <a href="" class="text-decoration-none text-dark">{{ $product->name }}</a>
                                                        </h6>
                                                        <div class="product-price mb-1 w-100 d-flex justify-content-center align-items-baseline gap-2">
                                                            @if($product->sale_price)
                                                            <span class="text-danger fw-bold fs-6">{{ number_format($product->sale_price) }}đ</span>
                                                            <small class="text-muted text-decoration-line-through ms-1">{{ number_format($product->price) }}đ</small>
                                                            @else
                                                            <span class="text-primary fw-bold fs-6">{{ number_format($product->price) }}đ</span>
                                                            @endif
                                                        </div>
                                                        <div class="product-rating text-warning small mb-2 w-100 d-flex justify-content-center align-items-center gap-1">
                                                            <i class="fas fa-star"></i>
                                                            <i class="fas fa-star"></i>
                                                            <i class="fas fa-star"></i>
                                                            <i class="fas fa-star"></i>
                                                            <i class="fas fa-star-half-alt"></i>
                                                            <small class="text-muted ms-1">(4.5)</small>
                                                        </div>
                                                        <div class="d-flex justify-content-between align-items-center mt-auto gap-2">
                                                            <a href="#" class="btn btn-light border-0 shadow-sm rounded-circle p-2 add-to-cart" title="Thêm vào giỏ hàng">
                                                                <i class="fas fa-shopping-cart text-primary"></i>
                                                            </a>
                                                            <a href="#" class="btn btn-light border-0 shadow-sm rounded-circle p-2 add-to-wishlist" title="Thêm vào yêu thích">
                                                                <i class="fas fa-heart text-danger"></i>
                                                            </a>
                                                            <a href="{{ route('product.show', $product->id) }}" class="btn btn-light border-0 shadow-sm rounded-circle p-2 quick-view" title="Xem nhanh">
                                                                <i class="fas fa-eye text-info"></i>
                                                            </a>
                                                        </div>
                                                            <form action="{{ route('cart-detail') }}" method="POST" class="mt-3">
                                                                @csrf
                                                                <input type="hidden" name="product_id" value="{{ $product->id }}">
                                                                <input type="hidden" name="variant_id" value="{{ $product->variants->first()?->id }}">
                                                                <input type="hidden" name="quantity" value="1">
                                                                <button type="submit" class="btn btn-primary btn-sm w-100 rounded-pill">
                                                                    Mua ngay
                                                                </button>
                                                            </form>
                                                    </div>
                                                </div>
                                            </div>
                                            @endforeach
                                        </div>
                                    </div>
                                </div>
                                @endforeach
                            </div>
                        </div>
                    </section>

                </main>
                <!-- #main -->
            </div>
            <!-- #primary -->
        </div>
        <!-- .row -->
    </div>
    <!-- .col-full -->
</div>

<style>
.text-gradient {
    background: linear-gradient(45deg, #2196F3, #00BCD4);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.product-card {
    transition: box-shadow 0.3s, transform 0.3s;
    border-radius: 1rem;
    box-shadow: 0 2px 12px rgba(0,0,0,0.07);
    background: #fff;
    min-height: 220px;
    max-width: 100%;
    width: 100%;
    position: relative;
}
.product-card:hover {
    box-shadow: 0 8px 32px rgba(33,150,243,0.12), 0 2px 8px rgba(0,0,0,0.08);
    transform: translateY(-6px) scale(1.02);
    z-index: 2;
}
.product-image-wrapper {
    background: linear-gradient(135deg, #f8fafc 60%, #e3f2fd 100%);
    border-radius: 1rem 1rem 0 0;
    min-height: unset;
    height: 140px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}
.product-thumbnail {
    transition: transform 0.4s cubic-bezier(.4,2,.6,1);
    max-height: 110px;
}
.product-card:hover .product-thumbnail {
    transform: scale(1.08) rotate(-2deg);
}
.card-body {
    min-height: unset;
    padding: 0.5rem 0.5rem 0.5rem 0.5rem;
}
.btn-gradient {
    background: linear-gradient(45deg, #2196F3, #00BCD4);
    color: #fff;
    border: none;
    transition: background 0.3s, box-shadow 0.3s;
    box-shadow: 0 2px 8px rgba(33,150,243,0.08);
}
.btn-gradient:hover {
    background: linear-gradient(45deg, #1976D2, #0097A7);
    color: #fff;
    box-shadow: 0 4px 16px rgba(33,150,243,0.16);
}
.btn-light.rounded-circle {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: box-shadow 0.2s, transform 0.2s;
    background: #f8fafc;
}
.btn-light.rounded-circle:hover {
    box-shadow: 0 2px 8px rgba(33,150,243,0.12);
    transform: scale(1.12);
}
.card-body {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    min-height: 180px;
}
.product-price {
    display: flex;
    align-items: baseline;
    gap: 0.5rem;
    font-size: 1rem;
}
.product-rating {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.85rem;
}
.card-body.text-center {
    align-items: center;
    text-align: center;
}
.product-price {
    justify-content: center !important;
    align-items: baseline !important;
    gap: 0.5rem;
    font-size: 1rem;
    width: 100%;
}
.product-rating {
    justify-content: center !important;
    align-items: center !important;
    gap: 0.25rem;
    font-size: 0.85rem;
    width: 100%;
}
@media (max-width: 768px) {
    .product-card {
        min-height: 180px;
    }
    .btn-light.rounded-circle {
        width: 28px;
        height: 28px;
    }
}
</style>
@endsection